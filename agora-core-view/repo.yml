---
#- name: AgoraCoreView, installing grunt and bower
#  sudo: true
#  npm: name={{ item }} global=yes
#  with_items:
#    - grunt-cli
#    - grunt
#    - bower

# Install nodejs
- name: Install Nodejs
  sudo: true
  sudo_user: agoracore
  shell: wget http://nodejs.org/dist/v0.10.31/node-v0.10.31.tar.gz -O /home/agoracore/node.0.10.31.tar.gz
- name: Install Nodejs 2
  sudo: true
  sudo_user: agoracore
  shell: tar -xzvf /home/agoracore/node.0.10.31.tar.gz
         chdir=/home/agoracore/
- name: Install Nodejs 3
  sudo: true
  sudo_user: agoracore
  shell: ./configure && make
         chdir=/home/agoracore/node-v0.10.31
- name: Install Nodejs 4
  sudo: true
  shell: make install
         chdir=/home/agoracore/node-v0.10.31
- name: Install Nodejs 5
  sudo: true
  shell: npm install -g grunt-cli grunt bower
         chdir=/home/agoracore/node-v0.10.31

- name: AgoraCoreView, Git clone
  sudo: true
  sudo_user: agoracore
  git: repo=https://github.com/agoravoting/agora-core-view.git
       dest=/home/agoracore/agora-core-view

- name: AgoraCoreView, npm install
  sudo: true
  sudo_user: agoracore
  shell: npm install chdir=/home/agoracore/agora-core-view

- name: AgoraCoreView, bower install
  sudo: true
  sudo_user: agoracore
  shell: bower install chdir=/home/agoracore/agora-core-view

- name: AgoraCoreView, grunt build
  sudo: true
  sudo_user: agoracore
  shell: grunt build chdir=/home/agoracore/agora-core-view
